<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Annsetu | Messages</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
    --primary:#6366f1;
    --accent:#8b5cf6;
    --bg:#0f172a;
    --card:rgba(255,255,255,0.06);
    --border:rgba(255,255,255,0.1);
    --text:#f8fafc;
    --muted:#94a3b8;
}

*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family:'Inter',sans-serif;
    background:linear-gradient(135deg,#0f172a,#1e293b);
    color:var(--text);
    min-height:100vh;
    position:relative;
}

body::before{
    content:"";
    position:fixed;
    inset:0;
    background:url("assets/bg.png") center/cover no-repeat;
    opacity:1;
    z-index:-2;
}

body::after{
    content:"";
    position:fixed;
    inset:0;
    background:linear-gradient(rgba(15,23,42,0.85),rgba(15,23,42,0.85));
    z-index:-1;
}

/* NAVBAR */
.top-nav{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:1.2rem 3rem;
    border-bottom:1px solid var(--border);
    background:rgba(255,255,255,0.03);
    backdrop-filter:blur(12px);
}

.brand{font-weight:700;font-size:1.2rem;}

.nav-links{display:flex;gap:2rem;}

.nav-links a{
    text-decoration:none;
    color:var(--muted);
    font-weight:500;
    transition:0.3s;
}

.nav-links a:hover,
.nav-links a[aria-current="page"]{color:white;}

/* LAYOUT */
.page-body{
    max-width:1200px;
    margin:auto;
    padding:3rem 2rem;
    display:grid;
    grid-template-columns:2fr 1fr;
    gap:2rem;
}

/* PANEL */
.messages-panel{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:20px;
    padding:2rem;
    backdrop-filter:blur(20px);
}

.message-thread{
    padding:1.2rem;
    border-radius:14px;
    border:1px solid var(--border);
    background:rgba(255,255,255,0.04);
    margin-bottom:1rem;
    cursor:pointer;
    transition:0.3s;
}

.message-thread:hover{
    transform:translateY(-4px);
    box-shadow:0 12px 30px rgba(0,0,0,0.4);
}

.message-meta{
    margin-top:0.5rem;
    font-size:0.8rem;
    color:var(--muted);
}

/* CHAT */
#chatWindow{
    height:350px;
    overflow-y:auto;
    padding:20px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,0.15);
    background:rgba(15,23,42,0.6);
    backdrop-filter:blur(12px);
    margin-bottom:15px;
}

.chat-bubble{
    max-width:70%;
    padding:10px 14px;
    border-radius:14px;
    margin-bottom:10px;
    font-size:0.9rem;
}

.chat-bubble{
    max-width:65%;
    padding:14px 18px;
    border-radius:18px;
    margin-bottom:14px;
    font-size:0.92rem;
    position:relative;
    word-wrap:break-word;
}

/* MY MESSAGE (RIGHT SIDE) */
.chat-bubble.me{
    margin-left:auto;
    background:linear-gradient(135deg,#6366f1,#8b5cf6);
    color:white;
    box-shadow:0 10px 30px rgba(99,102,241,0.45);
    border-top-right-radius:6px;
}

/* OTHER MESSAGE (LEFT SIDE) */
.chat-bubble.other{
    margin-right:auto;
    background:rgba(255,255,255,0.08);
    color:#f8fafc;
    border:1px solid rgba(255,255,255,0.15);
    border-top-left-radius:6px;
}

.timestamp{
    font-size:0.7rem;
    color:var(--muted);
    margin-top:4px;
}

/* INPUT */
.chat-input{
    display:flex;
    gap:10px;
}

.chat-input textarea{
    flex:1;
    padding:12px;
    border-radius:10px;
    border:1px solid var(--border);
    background:rgba(255,255,255,0.05);
    color:white;
}

.chat-input button{
    padding:12px 18px;
    border-radius:10px;
    border:none;
    background:linear-gradient(90deg,#6366f1,#8b5cf6);
    color:white;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.chat-input button:hover{
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(99,102,241,0.4);
}

/* SIDE CARD */
.policy-card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:20px;
    padding:2rem;
    backdrop-filter:blur(20px);
}

.policy-card ul{
    margin-top:1rem;
    padding-left:1rem;
    color:var(--muted);
}

@media(max-width:1000px){
    .page-body{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<nav class="top-nav">
    <div class="brand">Annsetu</div>
    <div class="nav-links">
        <a href="home.html">Feed</a>
        <a href="connections.html">Connections</a>
        <a href="messages.html" aria-current="page">Messages</a>
        <a href="profile.html">Profile</a>
        <a href="index.html">Logout</a>
    </div>
</nav>

<main class="page-body">

<section class="messages-panel">

<header>
    <h1>Secure Messages</h1>
    <p>Coordinate pickups, confirmations, and delivery timing.</p>
</header>

<!-- Conversations -->
<div id="conversationsContainer"></div>

<!-- Chat Section -->
<div id="chatSection" style="display:none; margin-top:20px;">

    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <h3 id="chatPartnerName"></h3>
        <button id="backBtn" class="chat-input button">Back</button>
    </div>

    <div id="chatWindow"></div>

    <div class="chat-input">
        <textarea id="chatMessage" rows="2" placeholder="Type your message..."></textarea>
        <button id="sendBtn">Send</button>
    </div>

</div>

</section>

<aside class="policy-card">
<h2>Ownership & Traceability</h2>
<p>All communication logs align with donation records to ensure accountability and compliance tracking.</p>
<ul>
<li>Thread history saved securely</li>
<li>Time-stamped communication</li>
<li>Secure NGO & donor coordination</li>
</ul>
</aside>

</main>

<script src="js/messages.js"></script>

</body>
</html>
